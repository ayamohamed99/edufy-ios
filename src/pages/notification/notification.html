<ion-header>
  <ion-navbar color="primary">
    <ion-buttons left>
      <button ion-button icon-only menuToggle>
       <ion-icon name="menu"></ion-icon>
      </button>
    </ion-buttons>
    <ion-title text-center>Notifications</ion-title>
  </ion-navbar>
  <ion-toolbar class="toolBarShap" color="primary" *ngIf="!platform.is('ios')">
    <ion-segment [(ngModel)]="selectedTab" color="light">
      <ion-segment-button style="min-width: fit-content; padding-left: 6px;padding-right: 6px" value="all" (click)="tabThatSelectedDo('all')">All</ion-segment-button>
      <ion-segment-button style="min-width: fit-content; padding-left: 6px;padding-right: 6px" value="sent" (click)="tabThatSelectedDo('sent')">Sent</ion-segment-button>
      <ion-segment-button style="min-width: fit-content; padding-left: 6px;padding-right: 6px" value="approved" (click)="tabThatSelectedDo('approved')" *ngIf="accountServ.getUserRole().notificationApproved">Awaiting Approval</ion-segment-button>
      <ion-segment-button style="min-width: fit-content; padding-left: 6px;padding-right: 6px" value="archived" (click)="tabThatSelectedDo('archived')" *ngIf="accountServ.getUserRole().archiveNotificationView">Archived</ion-segment-button>
    </ion-segment>
  </ion-toolbar>
</ion-header>

<ion-content class="contentColor">

  <ion-segment [(ngModel)]="selectedTab" color="primary" style="padding-top: 5px;padding-right: 5px;padding-left: 5px" *ngIf="platform.is('ios')">
    <ion-segment-button style="min-width: fit-content; padding-left: 6px;padding-right: 6px" value="all" (click)="tabThatSelectedDo('all')">All</ion-segment-button>
    <ion-segment-button style="min-width: fit-content; padding-left: 6px;padding-right: 6px" value="sent" (click)="tabThatSelectedDo('sent')">Sent</ion-segment-button>
    <ion-segment-button style="min-width: fit-content; padding-left: 6px;padding-right: 6px" value="approved" (click)="tabThatSelectedDo('approved')" *ngIf="accountServ.getUserRole().notificationApproved">Awaiting Approval</ion-segment-button>
    <ion-segment-button style="min-width: fit-content; padding-left: 6px;padding-right: 6px" value="archived" (click)="tabThatSelectedDo('archived')" *ngIf="accountServ.getUserRole().archiveNotificationView">Archived</ion-segment-button>
  </ion-segment>


  <ion-slides style="height: 100%;" (ionSlideDidChange)="slideChanged()">
    <ion-slide style="height: 100%;">
      <ion-content class="contentScroll">

        <ion-grid>
          <ion-row>
            <ion-col *ngFor="let notify of notifications; let i = index" col-12 col-sm-6 col-xl-4 col-lg-6 col-md-4>
              <ion-card class="scale-up-center">
                <ion-item style="background-color: white">

                  <h1>{{notify.title}}</h1>
                  <button item-end ion-button outline icon-start style="color: #1daf4c;border-color: #1daf4c" (click)="approveNotification(i)" *ngIf="accountServ.getUserRole().notificationCanApprove&&!notify.approved">
                    <ion-icon style="color: #1daf4c;padding-right: 10px" name="checkmark"></ion-icon>
                    Approve
                  </button>
                  <ion-icon item-end style="color: #7a7a7a;" name="bookmark" (click)="archiveNotification(i)" *ngIf="!notify.archived&&accountServ.getUserRole().archiveNotificationCreate"></ion-icon>
                  <ion-icon item-end style="color: #488aff;" name="bookmark" (click)="archiveNotification(i)" *ngIf="notify.archived&&accountServ.getUserRole().archiveNotificationCreate"></ion-icon>
                  <button ion-button clear icon-only *ngIf="notify.pending != 'pending' && (accountServ.getUserRole().notificationDelete || accountServ.getUserRole().notificationUpdate)" item-end (click)="onSelectCard($event,notify.notificationId,notify.title,notify.body,notify.receiversList,notify.tagsListName,notify.attachmentsList, i)">
                    <ion-icon style="background: #eee0;color: #000000;" name="more" class="buttonShape" ></ion-icon>
                  </button>
                </ion-item>
                <div style="padding-left: 16px;">
                  <h2 style="color: gray">{{notify.body}}</h2>
                </div>
                <ion-card-content>
                  <ion-slides pager style="height: 316px; padding: 8px" *ngIf="notify.attachmentsList.length>0" >
                    <ion-slide *ngFor="let item of notify.attachmentsList" (click)="onAttachmentClick($event,item.name,item.id,item.type,item.url,notify.pending)">
                      <h3>{{item.name.substring(17)}}</h3>
                      <div style="text-align: -webkit-center;/">
                        <img class="imgUrl" justify-content-center [src]="item.url" *ngIf="item.type == 'IMAGE'">
                        <img class="imgAttach" justify-content-center src="assets/imgs/pdf_img.png" *ngIf="item.type == 'PDF'">
                        <img class="imgAttach" justify-content-center src="assets/imgs/word_img.png" *ngIf="item.type == 'WORD'">
                        <img class="imgAttach" justify-content-center src="assets/imgs/excel_img.png" *ngIf="item.type == 'EXCEL'">
                        <img class="imgAttach" justify-content-center src="assets/imgs/powerpoint_img.png" *ngIf="item.type == 'POWERPOINT'">
                        <img class="imgAttach" justify-content-center src="assets/imgs/audio_img.png" *ngIf="item.type == 'AUDIO'">
                        <img class="imgAttach" justify-content-center src="assets/imgs/video_img.png" *ngIf="item.type == 'VIDEO'">
                        <img class="imgAttach" justify-content-center src="assets/imgs/doc_img.png" *ngIf="item.type != 'PDF' && item.type != 'IMAGE' && item.type != 'WORD' && item.type != 'EXCEL' && item.type != 'POWERPOINT' && item.type != 'AUDIO' && item.type != 'VIDEO'">
                      </div>
                    </ion-slide>
                  </ion-slides>

                </ion-card-content>

                <div style="height: 8px; background-color: white"></div>

                <ion-item>
                  <ion-avatar item-start>
                    <img src="assets/imgs/profile.png">
                  </ion-avatar>
                  <ion-label text-capitalize>{{ notify.senderName}}</ion-label>
                  <button ion-button outline item-end class="buttonInCard" *ngIf="notify.pending != 'pending'" (click)="openNotificationViewBy(notify)">{{notify.seenCount}} views</button>
                  <ion-badge color="danger" item-end *ngIf="notify.pending == 'pending'">pending</ion-badge>
                </ion-item>
              </ion-card>
            </ion-col>
          </ion-row>
        </ion-grid>


        <ion-infinite-scroll (ionInfinite)="$event.waitFor(doInfinite())">
          <ion-infinite-scroll-content></ion-infinite-scroll-content>
        </ion-infinite-scroll>

      </ion-content>
    </ion-slide>



     <!--SENT VIEW-->
    <ion-slide>

      <ion-content class="contentScroll">

        <ion-grid>
          <ion-row>
            <ion-col *ngFor="let notify of notificationsSent; let i = index" col-12 col-sm-6 col-xl-4 col-lg-6 col-md-4>
              <ion-card class="scale-up-center">
                <ion-item style="background-color: white">

                  <h1>{{notify.title}}</h1>
                  <ion-icon item-end style="color: #7a7a7a;" name="bookmark" (click)="archiveNotification(i)" *ngIf="!notify.archived&&accountServ.getUserRole().archiveNotificationCreate"></ion-icon>
                  <ion-icon item-end style="color: #488aff;" name="bookmark" (click)="archiveNotification(i)" *ngIf="notify.archived&&accountServ.getUserRole().archiveNotificationCreate"></ion-icon>
                  <button ion-button clear icon-only *ngIf="notify.pending != 'pending' && (accountServ.getUserRole().notificationDelete || accountServ.getUserRole().notificationUpdate)" item-end (click)="onSelectCard($event,notify.notificationId,notify.title,notify.body,notify.receiversList,notify.tagsListName,notify.attachmentsList, i)">
                    <ion-icon style="background: #eee0;color: #000000;" name="more" class="buttonShape" ></ion-icon>
                  </button>
                </ion-item>
                <div style="padding-left: 16px;">
                  <h2 style="color: gray">{{notify.body}}</h2>
                </div>
                <ion-card-content>
                  <ion-slides pager style="height: 316px; padding: 8px" *ngIf="notify.attachmentsList.length>0" >
                    <ion-slide *ngFor="let item of notify.attachmentsList" (click)="onAttachmentClick($event,item.name,item.id,item.type,item.url,notify.pending)">
                      <h3>{{item.name.substring(17)}}</h3>
                      <div style="text-align: -webkit-center;/">
                        <img class="imgUrl" justify-content-center [src]="item.url" *ngIf="item.type == 'IMAGE'">
                        <img class="imgAttach" justify-content-center src="assets/imgs/pdf_img.png" *ngIf="item.type == 'PDF'">
                        <img class="imgAttach" justify-content-center src="assets/imgs/word_img.png" *ngIf="item.type == 'WORD'">
                        <img class="imgAttach" justify-content-center src="assets/imgs/excel_img.png" *ngIf="item.type == 'EXCEL'">
                        <img class="imgAttach" justify-content-center src="assets/imgs/powerpoint_img.png" *ngIf="item.type == 'POWERPOINT'">
                        <img class="imgAttach" justify-content-center src="assets/imgs/audio_img.png" *ngIf="item.type == 'AUDIO'">
                        <img class="imgAttach" justify-content-center src="assets/imgs/video_img.png" *ngIf="item.type == 'VIDEO'">
                        <img class="imgAttach" justify-content-center src="assets/imgs/doc_img.png" *ngIf="item.type != 'PDF' && item.type != 'IMAGE' && item.type != 'WORD' && item.type != 'EXCEL' && item.type != 'POWERPOINT' && item.type != 'AUDIO' && item.type != 'VIDEO'">
                      </div>
                    </ion-slide>
                  </ion-slides>

                </ion-card-content>

                <div style="height: 8px; background-color: white"></div>

                <ion-item>
                  <ion-avatar item-start>
                    <img src="assets/imgs/profile.png">
                  </ion-avatar>
                  <ion-label text-capitalize>{{ notify.senderName}}</ion-label>
                  <button ion-button outline item-end class="buttonInCard" *ngIf="notify.pending != 'pending'" (click)="openNotificationViewBy(notify)">{{notify.seenCount}} views</button>
                  <ion-badge color="danger" item-end *ngIf="notify.pending == 'pending'">pending</ion-badge>
                </ion-item>
              </ion-card>
            </ion-col>
          </ion-row>
        </ion-grid>


        <ion-infinite-scroll (ionInfinite)="$event.waitFor(doInfinite())">
          <ion-infinite-scroll-content></ion-infinite-scroll-content>
        </ion-infinite-scroll>

      </ion-content>

    </ion-slide>



    <!--Awaiting Approved-->
    <ion-slide *ngIf="accountServ.getUserRole().notificationApproved">

      <ion-content class="contentScroll">

        <ion-grid>
          <ion-row>
            <ion-col *ngFor="let notify of notificationsApproved; let i = index" col-12 col-sm-6 col-xl-4 col-lg-6 col-md-4>
              <ion-card class="scale-up-center">
                <ion-item style="background-color: white">

                  <h1>{{notify.title}}</h1>
                  <button item-end ion-button outline icon-start style="color: #1daf4c;border-color: #1daf4c" (click)="approveNotification(i)" *ngIf="accountServ.getUserRole().notificationCanApprove">
                    <ion-icon style="color: #1daf4c;padding-right: 10px" name="checkmark"></ion-icon>
                    Approve
                  </button>
                  <ion-icon item-end style="color: #7a7a7a;" name="bookmark" (click)="archiveNotification(i)" *ngIf="!notify.archived&&accountServ.getUserRole().archiveNotificationCreate"></ion-icon>
                  <ion-icon item-end style="color: #488aff;" name="bookmark" (click)="archiveNotification(i)" *ngIf="notify.archived&&accountServ.getUserRole().archiveNotificationCreate"></ion-icon>
                  <button ion-button clear icon-only *ngIf="notify.pending != 'pending' && (accountServ.getUserRole().notificationDelete || accountServ.getUserRole().notificationUpdate)" item-end (click)="onSelectCard($event,notify.notificationId,notify.title,notify.body,notify.receiversList,notify.tagsListName,notify.attachmentsList, i)">
                    <ion-icon style="background: #eee0;color: #000000;" name="more" class="buttonShape" ></ion-icon>
                  </button>
                </ion-item>
                <div style="padding-left: 16px;">
                  <h2 style="color: gray">{{notify.body}}</h2>
                </div>
                <ion-card-content>
                  <ion-slides pager style="height: 316px; padding: 8px" *ngIf="notify.attachmentsList.length>0" >
                    <ion-slide *ngFor="let item of notify.attachmentsList" (click)="onAttachmentClick($event,item.name,item.id,item.type,item.url,notify.pending)">
                      <h3>{{item.name.substring(17)}}</h3>
                      <div style="text-align: -webkit-center;/">
                        <img class="imgUrl" justify-content-center [src]="item.url" *ngIf="item.type == 'IMAGE'">
                        <img class="imgAttach" justify-content-center src="assets/imgs/pdf_img.png" *ngIf="item.type == 'PDF'">
                        <img class="imgAttach" justify-content-center src="assets/imgs/word_img.png" *ngIf="item.type == 'WORD'">
                        <img class="imgAttach" justify-content-center src="assets/imgs/excel_img.png" *ngIf="item.type == 'EXCEL'">
                        <img class="imgAttach" justify-content-center src="assets/imgs/powerpoint_img.png" *ngIf="item.type == 'POWERPOINT'">
                        <img class="imgAttach" justify-content-center src="assets/imgs/audio_img.png" *ngIf="item.type == 'AUDIO'">
                        <img class="imgAttach" justify-content-center src="assets/imgs/video_img.png" *ngIf="item.type == 'VIDEO'">
                        <img class="imgAttach" justify-content-center src="assets/imgs/doc_img.png" *ngIf="item.type != 'PDF' && item.type != 'IMAGE' && item.type != 'WORD' && item.type != 'EXCEL' && item.type != 'POWERPOINT' && item.type != 'AUDIO' && item.type != 'VIDEO'">
                      </div>
                    </ion-slide>
                  </ion-slides>

                </ion-card-content>

                <div style="height: 8px; background-color: white"></div>

                <ion-item>
                  <ion-avatar item-start>
                    <img src="assets/imgs/profile.png">
                  </ion-avatar>
                  <ion-label text-capitalize>{{ notify.senderName}}</ion-label>
                  <button ion-button outline item-end class="buttonInCard" *ngIf="notify.pending != 'pending'" (click)="openNotificationViewBy(notify)">{{notify.seenCount}} views</button>
                  <ion-badge color="danger" item-end *ngIf="notify.pending == 'pending'">pending</ion-badge>
                </ion-item>
              </ion-card>
            </ion-col>
          </ion-row>
        </ion-grid>


        <ion-infinite-scroll (ionInfinite)="$event.waitFor(doInfinite())">
          <ion-infinite-scroll-content></ion-infinite-scroll-content>
        </ion-infinite-scroll>

      </ion-content>

    </ion-slide>




    <!--Archive-->
    <ion-slide *ngIf="accountServ.getUserRole().archiveNotificationView">

      <ion-content class="contentScroll">

        <ion-grid>
          <ion-row>
            <ion-col *ngFor="let notify of notificationsArchived; let i = index" col-12 col-sm-6 col-xl-4 col-lg-6 col-md-4>
              <ion-card class="scale-up-center">
                <ion-item style="background-color: white">

                  <h1>{{notify.title}}</h1>
                  <ion-icon item-end style="color: #7a7a7a;" name="bookmark" (click)="archiveNotification(i)" *ngIf="!notify.archived&&accountServ.getUserRole().archiveNotificationCreate"></ion-icon>
                  <ion-icon item-end style="color: #488aff;" name="bookmark" (click)="archiveNotification(i)" *ngIf="notify.archived&&accountServ.getUserRole().archiveNotificationCreate"></ion-icon>
                  <button ion-button clear icon-only *ngIf="notify.pending != 'pending' && (accountServ.getUserRole().notificationDelete || accountServ.getUserRole().notificationUpdate)" item-end (click)="onSelectCard($event,notify.notificationId,notify.title,notify.body,notify.receiversList,notify.tagsListName,notify.attachmentsList,notify.attachmentsList, i)">
                    <ion-icon style="background: #eee0;color: #000000;" name="more" class="buttonShape" ></ion-icon>
                  </button>
                </ion-item>
                <div style="padding-left: 16px;">
                  <h2 style="color: gray">{{notify.body}}</h2>
                </div>
                <ion-card-content>
                  <ion-slides pager style="height: 316px; padding: 8px" *ngIf="notify.attachmentsList.length>0" >
                    <ion-slide *ngFor="let item of notify.attachmentsList" (click)="onAttachmentClick($event,item.name,item.id,item.type,item.url,notify.pending)">
                      <h3>{{item.name.substring(17)}}</h3>
                      <div style="text-align: -webkit-center;/">
                        <img class="imgUrl" justify-content-center [src]="item.url" *ngIf="item.type == 'IMAGE'">
                        <img class="imgAttach" justify-content-center src="assets/imgs/pdf_img.png" *ngIf="item.type == 'PDF'">
                        <img class="imgAttach" justify-content-center src="assets/imgs/word_img.png" *ngIf="item.type == 'WORD'">
                        <img class="imgAttach" justify-content-center src="assets/imgs/excel_img.png" *ngIf="item.type == 'EXCEL'">
                        <img class="imgAttach" justify-content-center src="assets/imgs/powerpoint_img.png" *ngIf="item.type == 'POWERPOINT'">
                        <img class="imgAttach" justify-content-center src="assets/imgs/audio_img.png" *ngIf="item.type == 'AUDIO'">
                        <img class="imgAttach" justify-content-center src="assets/imgs/video_img.png" *ngIf="item.type == 'VIDEO'">
                        <img class="imgAttach" justify-content-center src="assets/imgs/doc_img.png" *ngIf="item.type != 'PDF' && item.type != 'IMAGE' && item.type != 'WORD' && item.type != 'EXCEL' && item.type != 'POWERPOINT' && item.type != 'AUDIO' && item.type != 'VIDEO'">
                      </div>
                    </ion-slide>
                  </ion-slides>

                </ion-card-content>

                <div style="height: 8px; background-color: white"></div>

                <ion-item>
                  <ion-avatar item-start>
                    <img src="assets/imgs/profile.png">
                  </ion-avatar>
                  <ion-label text-capitalize>{{ notify.senderName}}</ion-label>
                  <button ion-button outline item-end class="buttonInCard" *ngIf="notify.pending != 'pending'" (click)="openNotificationViewBy(notify)">{{notify.seenCount}} views</button>
                  <ion-badge color="danger" item-end *ngIf="notify.pending == 'pending'">pending</ion-badge>
                </ion-item>
              </ion-card>
            </ion-col>
          </ion-row>
        </ion-grid>


        <ion-infinite-scroll (ionInfinite)="$event.waitFor(doInfinite())">
          <ion-infinite-scroll-content></ion-infinite-scroll-content>
        </ion-infinite-scroll>

      </ion-content>

    </ion-slide>

  </ion-slides>

  <ion-fab bottom right>
    <button ion-fab mini (click)="onOpenView()" *ngIf="accountServ.getUserRole().notificationCreate"><ion-icon name="add"></ion-icon></button>
  </ion-fab>

</ion-content>

